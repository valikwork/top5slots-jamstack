import React, { useState } from 'react'
import { Link, useStaticQuery, graphql } from "gatsby"



export default function TopTenSideBar() {

    const data = useStaticQuery(graphql`
    query {
        wpgraphql {
            siteSettings {
                opt_site_settings {
                    topReviewsHeading
                    topReviewsImage {
                        mediaItemUrl
                    }
                    reviews {
                        ... on WPGraphQL_Review {
                            id
                            title
                            uri
                            featuredImage {
                                node {
                                    mediaItemUrl
                                }
                            }
                            cpt_reviews {
                                rating
                            }
                        }
                    }
                }
            }
        }
    }
    `)

    const { topReviewsHeading, topReviewsImage, reviews } = data.wpgraphql.siteSettings.opt_site_settings
    
    return (
        <section className="top-list-sidebar">

            <div className="sidebar-header">
                <img src={topReviewsImage.mediaItemUrl} alt=""/>
                <h6>{topReviewsHeading}</h6>
                <svg width="24" height="24" className="uk-flag" viewBox="0 0 21 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M7.2188 19.7859V15.2578L3.83911 17.7516C4.79067 18.6375 5.93911 19.3266 7.2188 19.7859Z" fill="#2A5F9E"/>
                    <path d="M13.7812 19.786C15.0609 19.3266 16.2094 18.6375 17.1609 17.7516L13.7812 15.225V19.786Z" fill="#2A5F9E"/>
                    <path d="M1.21411 13.7812C1.31255 14.1094 1.4438 14.4047 1.60786 14.7328L2.88755 13.7812H1.21411Z" fill="#2A5F9E"/>
                    <path d="M18.1125 13.7812L19.3922 14.7328C19.5235 14.4375 19.6547 14.1094 19.786 13.7812H18.1125Z" fill="#2A5F9E"/>
                    <path d="M7.71102 12.4688H0.85321C0.951648 12.9281 1.0829 13.3547 1.21415 13.7812H2.88759L1.6079 14.7328C1.8704 15.2906 2.16571 15.7828 2.52665 16.275L5.90634 13.7812H7.21884V14.4375L3.37977 17.2594L3.83915 17.7188L7.21884 15.2578V19.7859C7.6454 19.95 8.07196 20.0484 8.53134 20.1469V12.4688H7.71102Z" fill="white"/>
                    <path d="M20.1469 12.4688H12.4688V20.1469C12.9281 20.0484 13.3547 19.9172 13.7812 19.7859V15.2578L17.1609 17.7188C17.6203 17.2922 18.0141 16.8328 18.4078 16.3406L14.8969 13.7812H17.1281L19.1297 15.2578C19.2281 15.0938 19.3266 14.8969 19.3922 14.7328L18.1125 13.7812H19.7859C19.9172 13.3547 20.0484 12.9281 20.1469 12.4688Z" fill="white"/>
                    <path d="M2.52661 16.275C2.78911 16.6359 3.05161 16.964 3.34692 17.2922L7.2188 14.4703V13.814H5.9063L2.52661 16.275Z" fill="#ED4C5C"/>
                    <path d="M14.9297 13.7812L18.4406 16.3406C18.5718 16.1766 18.6703 16.0125 18.8015 15.8484C18.8343 15.8156 18.8343 15.7828 18.8672 15.7828C18.9656 15.6187 19.0968 15.4219 19.1953 15.2578L17.1281 13.7812H14.9297Z" fill="#ED4C5C"/>
                    <path d="M13.7812 1.21407V5.7422L17.1609 3.24845C16.2094 2.36251 15.0609 1.67345 13.7812 1.21407Z" fill="#2A5F9E"/>
                    <path d="M7.2188 1.21407C5.93911 1.67345 4.79067 2.36251 3.83911 3.24845L7.2188 5.77501V1.21407Z" fill="#2A5F9E"/>
                    <path d="M19.786 7.21875C19.6875 6.89063 19.5563 6.59531 19.3922 6.26719L18.1125 7.21875H19.786Z" fill="#2A5F9E"/>
                    <path d="M2.88755 7.21875L1.60786 6.26719C1.47661 6.59531 1.34536 6.89063 1.21411 7.21875H2.88755Z" fill="#2A5F9E"/>
                    <path d="M13.2891 8.53126H20.1141C20.0156 8.07188 19.8844 7.64532 19.7531 7.21876H18.0797L19.3594 6.2672C19.0969 5.70938 18.8016 5.2172 18.4406 4.72501L15.0937 7.21876H13.7812V6.56251L17.6203 3.74063L17.1609 3.28126L13.7812 5.7422V1.21407C13.3547 1.05001 12.9281 0.951572 12.4688 0.853134V8.53126H13.2891Z" fill="white"/>
                    <path d="M0.85321 8.53126H8.53134V0.853134C8.07196 0.951572 7.6454 1.08282 7.21884 1.21407V5.7422L3.83915 3.28126C3.37977 3.70782 2.98602 4.1672 2.59227 4.65938L6.10321 7.21876H3.87196L1.8704 5.7422C1.77196 5.90626 1.67352 6.10313 1.6079 6.2672L2.88759 7.21876H1.21415C1.0829 7.64532 0.951648 8.07188 0.85321 8.53126Z" fill="white"/>
                    <path d="M18.4734 4.72499C18.2109 4.36405 17.9484 4.03593 17.6531 3.7078L13.7812 6.52968V7.18593H15.0937L18.4734 4.72499Z" fill="#ED4C5C"/>
                    <path d="M6.0704 7.21876L2.59227 4.65939C2.46102 4.82345 2.36259 4.98751 2.23134 5.15157C2.19852 5.18439 2.19852 5.2172 2.16571 5.2172C2.06727 5.38126 1.93602 5.57814 1.83759 5.7422L3.83915 7.21876H6.0704Z" fill="#ED4C5C"/>
                    <path d="M20.1469 8.53125H12.4688V0.853125C11.8453 0.721875 11.1891 0.65625 10.5 0.65625C9.81094 0.65625 9.15469 0.721875 8.53125 0.853125V8.53125H0.853125C0.721875 9.15469 0.65625 9.81094 0.65625 10.5C0.65625 11.1891 0.721875 11.8453 0.853125 12.4688H8.53125V20.1469C9.15469 20.2781 9.81094 20.3438 10.5 20.3438C11.1891 20.3438 11.8453 20.2781 12.4688 20.1469V12.4688H20.1469C20.2781 11.8453 20.3438 11.1891 20.3438 10.5C20.3438 9.81094 20.2781 9.15469 20.1469 8.53125Z" fill="#ED4C5C"/>
                </svg>
                <svg width="21" height="21" viewBox="0 0 21 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M7.13253 18.0224L0.307525 11.1974C-0.102508 10.7874 -0.102508 10.1225 0.307525 9.71246L1.79241 8.22753C2.20245 7.81746 2.86731 7.81746 3.27734 8.22753L7.87499 12.8251L17.7226 2.97753C18.1327 2.5675 18.7975 2.5675 19.2076 2.97753L20.6925 4.46246C21.1025 4.87249 21.1025 5.53732 20.6925 5.94739L8.61746 18.0224C8.20738 18.4325 7.54256 18.4325 7.13253 18.0224Z" fill="#5FCC6A"/>
                </svg>
            </div>

            {reviews.length > 0 && reviews.map(review => {

                const imgUrl = review.featuredImage.node.mediaItemUrl
                const { rating } = review.cpt_reviews;
                const { title, uri } = review

                return(
                    <Link to={uri} className="sidebar-item">
                        <img src={imgUrl} alt=""/>
                        <span>{title}</span>
                        <div className="rating-star">
                            <span>{rating}</span>
                            <svg width="51" height="51" viewBox="0 0 51 51" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M40 25.9997C40 33.7317 33.5079 40 25.4997 40C17.4921 40 11 33.7317 11 25.9997C11 18.2677 17.4921 12 25.4997 12C33.5079 12 40 18.2677 40 25.9997Z" fill="#C2A57B"/>
                                <path d="M44.6225 35.5078L49.4638 34.354L46.4839 30.3139C46.0204 29.6836 46.1477 28.7913 46.7684 28.3201C46.7913 28.3026 46.8149 28.2857 46.839 28.27L51 25.4991L46.839 22.7283C46.1913 22.2972 46.0101 21.4142 46.4346 20.756C46.4506 20.7315 46.4673 20.7077 46.4845 20.6844L49.4627 16.6443L44.6242 15.4916C43.8699 15.3122 43.4018 14.5456 43.5791 13.7797C43.5854 13.7506 43.5928 13.722 43.6014 13.6941L45.0338 8.85774L40.0943 9.45478C39.3251 9.54797 38.627 8.98996 38.5352 8.20886C38.5312 8.17857 38.5289 8.14886 38.5272 8.11857L38.2467 3.07548L33.812 5.34482C33.1197 5.69838 32.2765 5.4153 31.9283 4.71283C31.9151 4.68662 31.903 4.65982 31.8916 4.63245L29.9275 0L26.5225 3.67951C25.9925 4.25325 25.1045 4.28179 24.5395 3.743C24.5182 3.72262 24.4976 3.70165 24.4775 3.67951L21.0725 0L19.1084 4.64002C18.8038 5.36287 17.9796 5.69838 17.2671 5.38908C17.2402 5.37743 17.2138 5.3652 17.188 5.35181L12.7493 3.07257L12.4688 8.11391C12.447 8.50709 12.2663 8.87288 11.9692 9.12568C11.6743 9.3808 11.2866 9.49905 10.9017 9.45012L5.96221 8.85366L7.40314 13.69C7.62628 14.4431 7.20582 15.2376 6.46413 15.4642C6.43602 15.4729 6.40734 15.4805 6.37866 15.4875L1.53902 16.6396L4.51726 20.6797C4.98132 21.3099 4.85455 22.2029 4.23446 22.6741C4.21095 22.6916 4.188 22.7079 4.16391 22.7242L0 25.4991L4.16104 28.2723C4.80866 28.7045 4.98935 29.5875 4.56372 30.2452C4.54823 30.2696 4.5316 30.2935 4.51439 30.3168L1.53615 34.3569L6.37636 35.509C7.1301 35.689 7.59817 36.4561 7.42092 37.2221C7.41404 37.25 7.40716 37.278 7.39855 37.3054L5.96622 42.1493L10.9057 41.5522C11.6755 41.459 12.3736 42.0164 12.4653 42.7981C12.4688 42.8278 12.4711 42.8581 12.4728 42.8884L12.7533 47.9315L17.1937 45.6517C17.3893 45.5515 17.6056 45.4985 17.8247 45.4979C17.9887 45.4979 18.1511 45.527 18.3048 45.5853C18.6685 45.7193 18.9616 46.0006 19.1142 46.3617L21.0782 51L24.4827 47.3158C25.0133 46.7421 25.9012 46.7141 26.4657 47.2523C26.4875 47.2727 26.5081 47.2943 26.5282 47.3158L29.9275 50.9983L31.8916 46.36C32.1962 45.6365 33.0204 45.301 33.7329 45.6103C33.7598 45.622 33.7862 45.6348 33.812 45.6476L38.2519 47.9268L38.5324 42.8843C38.576 42.0986 39.2379 41.4975 40.0117 41.5417C40.041 41.5435 40.0702 41.5458 40.0995 41.5493L45.0389 42.1463L43.6066 37.303C43.384 36.5493 43.8045 35.7548 44.5468 35.5288C44.5743 35.5207 44.6013 35.5131 44.6294 35.5067L44.6225 35.5078ZM25.4997 43.0206C16.2025 43.0206 8.66568 35.3675 8.66568 25.9267C8.66568 16.4853 16.2025 8.83211 25.4997 8.83211C34.7975 8.83211 42.3343 16.4853 42.3343 25.9267C42.3246 35.3634 34.7935 43.0107 25.4997 43.0206Z" fill="#C2A57B"/>
                            </svg>
                        </div>
                    </Link>
                )
            }) }
            
            <Link className="show-all-casinos" to={"/reviews"}>
                Show All Casinos
                <svg width="9" height="11" viewBox="0 0 9 11" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M0.399993 0.500024L8.19999 5.73902L0.399994 10.9L0.399993 0.500024Z" fill="#C2A57B"/>
                </svg>
            </Link>
            
        </section>
    )
}
